GW 경유 + 단계 시나리오 (50→400 VU, 각 2분)

docker run --rm -i -p 5665:5665 -v "${PWD}\k6-test:/scripts" `
  -e K6_WEB_DASHBOARD=true -e K6_WEB_DASHBOARD_HOST=0.0.0.0 `
  -e SCENARIO=step-bid `
  -e STEP_FIRST_RPS=5 -e STEP_SECOND_RPS=10 -e STEP_RATE_SWITCH_MS=60000 `
  -e WS_BASE=ws://host.docker.internal:17700 `
  -e HTTP_BASE=http://host.docker.internal:17700 `
  -e TOKENS_FILE=/scripts/tokens.txt `
  -e AUCTION_ID=11111111-1111-1111-1111-111111111111 `
  -e BID_PRICE_START=1001 -e BID_PRICE_STEP=1 `
  grafana/k6 run --quiet /scripts/ws_test.js

실패/느린 응답 로그 추가 (진단용)

docker run --rm -i -p 5665:5665 -v "${PWD}\k6-test:/scripts" `
  -e K6_WEB_DASHBOARD=true -e K6_WEB_DASHBOARD_HOST=0.0.0.0 `
  -e SCENARIO=step-bid `
  -e STEP_FIRST_RPS=5 -e STEP_SECOND_RPS=10 -e STEP_RATE_SWITCH_MS=60000 `
  -e WS_BASE=ws://host.docker.internal:17700 `
  -e HTTP_BASE=http://host.docker.internal:17700 `
  -e TOKENS_FILE=/scripts/tokens.txt `
  -e AUCTION_ID=11111111-1111-1111-1111-111111111111 `
  -e BID_PRICE_START=1001 -e BID_PRICE_STEP=1 `
  -e LOG_WS_ERRORS=1 -e LOG_INFO_SLOW_MS=3000 `
  grafana/k6 run --quiet /scripts/ws_test.js

대시보드 http://localhost:5665

GW 경유, 다중 토큰, 지속 입찰 (500 VU, 1분, 대시보드)

docker run --rm -i -p 5665:5665 -v "${PWD}\k6-test:/scripts" `
  -e K6_WEB_DASHBOARD=true -e K6_WEB_DASHBOARD_HOST=0.0.0.0 `
  grafana/k6 run --vus 500 --duration 60s `
  -e WS_BASE=ws://host.docker.internal:17700 `
  -e HTTP_BASE=http://host.docker.internal:17700 `
  -e TOKENS_FILE=/scripts/tokens.txt `
  -e AUCTION_ID=11111111-1111-1111-1111-111111111111 `
  -e SEND_DELAY_MS=100 `
  -e SEND_EVERY_MS=1000 `
  -e SESSION_MS=60000 `
  -e BID_PRICE_BASE=1000 `
  -e BID_PRICE_STEP=0.01 `
  /scripts/ws_test.js

GW 경유, 다중 토큰, 지속 입찰 (100 VU, 10초)

docker run --rm -i -p 5665:5665 -v "${PWD}\k6-test:/scripts" `
  -e K6_WEB_DASHBOARD=true -e K6_WEB_DASHBOARD_HOST=0.0.0.0 `
  grafana/k6 run --vus 100 --duration 10s `
  -e WS_BASE=ws://host.docker.internal:17700 `
  -e HTTP_BASE=http://host.docker.internal:17700 `
  -e TOKENS_FILE=/scripts/tokens.txt `
  -e AUCTION_ID=11111111-1111-1111-1111-111111111111 `
  -e SEND_DELAY_MS=100 `
  -e SEND_EVERY_MS=1000 `
  -e SESSION_MS=10000 `
  -e BID_PRICE_BASE=1000 `
  -e BID_PRICE_STEP=0.01 `
  /scripts/ws_test.js

단일 토큰 (1 VU, 10초)

docker run --rm -i -v "${PWD}\k6-test:/scripts" grafana/k6 run `
  --vus 1 --duration 10s `
  -e WS_BASE=ws://host.docker.internal:17700 `
  -e HTTP_BASE=http://host.docker.internal:17700 `
  -e TOKEN=<JWT> `
  -e AUCTION_ID=11111111-1111-1111-1111-111111111111 `
  -e SEND_DELAY_MS=100 `
  -e SEND_EVERY_MS=1000 `
  -e SESSION_MS=10000 `
  -e BID_PRICE_BASE=1000 `
  -e BID_PRICE_STEP=0.01 `
  /scripts/ws_test.js

Auction 직접 연결 (토큰 없음, 헤더 기반)

docker run --rm -i -v "${PWD}\k6-test:/scripts" grafana/k6 run `
  --vus 500 --duration 60s `
  -e WS_BASE=ws://host.docker.internal:6600 `
  -e AUCTION_ID=11111111-1111-1111-1111-111111111111 `
  -e SEND_DELAY_MS=100 `
  -e SEND_EVERY_MS=1000 `
  -e SESSION_MS=60000 `
  -e BID_PRICE_BASE=1000 `
  -e BID_PRICE_STEP=0.01 `
  /scripts/ws_test.js

GW 경유, 다중 토큰, 지속 입찰 (1000 VU, 5분, 대시보드)

docker run --rm -i -p 5665:5665 -v "${PWD}\k6-test:/scripts" `
  -e K6_WEB_DASHBOARD=true -e K6_WEB_DASHBOARD_HOST=0.0.0.0 `
  grafana/k6 run --vus 1000 --duration 300s `
  -e WS_BASE=ws://host.docker.internal:17700 `
  -e HTTP_BASE=http://host.docker.internal:17700 `
  -e TOKENS_FILE=/scripts/tokens.txt `
  -e AUCTION_ID=11111111-1111-1111-1111-111111111111 `
  -e SEND_DELAY_MS=100 `
  -e SEND_EVERY_MS=1000 `
  -e SESSION_MS=300000 `
  -e BID_PRICE_BASE=1000 `
  -e BID_PRICE_STEP=0.01 `
  /scripts/ws_test.js
